<html>
<head>
<title>
MythTV Backend Setup
</title>
<link rel="stylesheet" type="text/css" href="/css/site.css">
<link rel="stylesheet" type="text/css" href="/setup/css/Config.css">
<link rel="stylesheet" type="text/css" href="/css/jquery-ui.css">

<link rel="icon"          href="/images/favicon.ico" type="image/x-icon">
<link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon">
<script language="JavaScript" type="text/javascript" src="/js/jquery.min.js"></script>
<script language="JavaScript" type="text/javascript" src="/js/jquery-ui.min.js"></script>
<script language="JavaScript" type="text/javascript" src="/setup/js/util.js"></script>
<script language="JavaScript" type="text/javascript" src="/setup/js/Config.js"></script>
<script language="JavaScript" type="text/javascript" src="/setup/js/form_inputs.js"></script>
<script language="JavaScript" type="text/javascript">

function loadConfigDatabaseForm() {
  $.ajax({
    type: "GET",
    url: "/Config/Database/XML",
    dataType: "xml",
    success: configDrawDatabaseForm
  }).error(function() { alert("Error downloading xml");});
}

function loadConfigGeneralForm() {
  $.ajax({
    type: "GET",
    url: "/Config/General/XML",
    dataType: "xml",
    success: configDrawGeneralForm
  }).error(function() { alert("Error downloading xml");});
}

function loadSetupPage(pageName) {
    loadContent("/setup/" + pageName + ".html");

    $.getScript("/setup/js/" + pageName + ".js");
}

function loadContent(contentURL, jsURL) {
    var html = $.ajax({
      url: contentURL,
        async: false
     }).responseText;

    $("#content").html(html);
    $("#secttabs").tabs();

    if (jsURL) {
        $.getScript(jsURL);
    }
}

function getCurrentTab(id) {
    var selected = $(id).tabs('option', 'selected');
    return selected;
}

function addTab(id, url, label) {
    $(id).tabs("add", url, label);
}

function removeTab(id, index) {
    $(id).tabs("remove", index);
}

function interceptMenuClicks() {
    $('#menu ul li a').click(function(event) {
        if (this.href.match("/Config/") == "/Config/") {
            event.preventDefault();
            loadContent(this.href, "/setup/js/Config.js");
        }
    });
}

$(document).ready(function() {
    interceptMenuClicks();
    $("#tabs").tabs();
    loadContent('/setup/overview.html');
});

</script>


</head>
<body>

<!-- Header -->
<div id="header">
    <div id="header_logo">
        <a href="/"><img src="/images/mythtv.png" class="png" width="180" height="64" border="0" alt="MythTV"></a>
    </div>

    <div id="header_title">
    </div>

    <div id="header_end">
    </div>
</div><!-- header -->

<div id="menu-bg">
    <div id="menu-title" align=center>
        MythBackend Setup
    </div>

    <div id="menu">
        <ul>
            <li><a class='menuitem' href='/Config/Database'>Database</a></li>
            <li><a class='menuitem' href='/Config/General'>General</a></li>
            <!-- some possible other menu items
            <li><a class='menuitem' href="javascript:loadSetupPage('tuning')">Tuning</a></li>
            -->
            <li><a class='menuitem' href="javascript:loadSetupPage('storagegroups')">Storage Groups</a></li>
            <!--
            <li><a class='menuitem' href="javascript:loadSetupPage('jobqueue')">Job Queue</a></li>
            <li><a class='menuitem' href="javascript:loadSetupPage('systemevents')">System Events</a></li>
            -->
			<li>--</li>
			<li><b><a class='menuitem' href='#'>Javascript test below</a></b></li>
            <li><a class='menuitem' href='javascript:loadConfigDatabaseForm()'>Database (javascript)</a></li>
            <li><a class='menuitem' href='javascript:loadConfigGeneralForm()'>General (javascript)</a></li>
        </ul>
    </div>
</div>

<div id="content">
</div>

</body>
</html>
